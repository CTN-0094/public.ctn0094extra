[{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"packages need vignette: vignette, walk basic procedures collapse participants’ Urine Drug Screen (UDS) Timeline Follow-Back (TLFB) data streams quinary word summaries downstream analysis. basic steps : calculate induction delay (difference, days, day participant randomized trial arm day received first dose study drug). public.ctn0094data database ) day randomization b) days study drugs administered, relative Day 0 (day study consent signed). partition study days weeks, mark weeks UDS collection event (marked “missing”). summarize UDS data within participant week symbols using quinary word logic, collapse symbols participant-specific “word”. Rather perform calculations ~3600 participants included public.ctn0094data public.ctn0094extra, use following 10 participants examples:","code":"library(public.ctn0094data) library(public.ctn0094extra) library(dplyr) library(purrr) library(tibble) library(tidyr) library(stringr) examplePeople_int <- c(1L, 163L, 210L, 242L, 4L, 17L, 13L, 1103L, 233L, 2089L)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"calculate-induction-delay","dir":"Articles","previous_headings":"","what":"Calculate Induction Delay","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"mentioned , induction delay difference, days, day participant randomized trial arm day received first dose study drug. reason need UDS collected TLFB recorded induction day must considered pre-treatment, even participant already assigned treatment arm.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"data-setup","dir":"Articles","previous_headings":"Calculate Induction Delay","what":"Data Setup","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"randomization day includes first second randomization day participants. CTN-0027 CTN-0051, days ; CTN-0030 days different. order find induction delay, need first randomization event Let’s inspect results:","code":"data_ls <- loadRawData(c(\"randomization\", \"treatment\"))  data_ls$randomization <-   data_ls$randomization %>%   select(who, when, treatment, randomized = which) %>%   # Remove second randomization events   filter(randomized != 2) %>%    # Retain example participants   filter(who %in% examplePeople_int)  data_ls$treatment <-    data_ls$treatment %>%    # Retain example participants   filter(who %in% examplePeople_int) data_ls$randomization #> # A tibble: 9 × 4 #>     who  when treatment            randomized #>   <int> <dbl> <fct>                <fct>      #> 1     4     1 Inpatient NR-NTX     1          #> 2    13     4 Outpatient BUP       1          #> 3    17    13 Methadone            1          #> 4   163     6 Outpatient BUP       1          #> 5   210     5 Methadone            1          #> 6   233     4 Outpatient BUP       1          #> 7   242     8 Inpatient NR-NTX     1          #> 8  1103     4 Outpatient BUP + EMM 1          #> 9  2089     2 Outpatient BUP       1  data_ls$treatment #> # A tibble: 1,008 × 3 #>      who amount  when #>    <int>  <dbl> <dbl> #>  1     4      1     1 #>  2     4      1    28 #>  3     4      1    53 #>  4     4      1    81 #>  5     4      1   109 #>  6     4      1   141 #>  7    13      8     4 #>  8    13     12     5 #>  9    13     16     6 #> 10    13     16     7 #> # ℹ 998 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"mark-study-days-with-administered-treatment-drugs","dir":"Articles","previous_headings":"Calculate Induction Delay","what":"Mark Study Days with Administered Treatment Drugs","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"participants marked receiving 0mg study drug assigned. want mark days participant actually got assigned study drug.","code":"treatTimeLong_df <-   # Collapse Data List   data_ls %>%   reduce(.f = full_join, by = c(\"who\", \"when\")) %>%   as_tibble() %>%   arrange(who, when) %>%   # First pass: find any day with a dose of treatment drug   rowwise() %>%   mutate(     treated = if_else(       condition = !is.na(amount) & amount > 0,       true = TRUE,       false = FALSE,       missing = FALSE     )   )  # Inspect results treatTimeLong_df #> # A tibble: 1,009 × 6 #> # Rowwise:  #>      who  when treatment        randomized amount treated #>    <int> <dbl> <fct>            <fct>       <dbl> <lgl>   #>  1     4     1 Inpatient NR-NTX 1               1 TRUE    #>  2     4    28 NA               NA              1 TRUE    #>  3     4    53 NA               NA              1 TRUE    #>  4     4    81 NA               NA              1 TRUE    #>  5     4   109 NA               NA              1 TRUE    #>  6     4   141 NA               NA              1 TRUE    #>  7    13     4 Outpatient BUP   1               8 TRUE    #>  8    13     5 NA               NA             12 TRUE    #>  9    13     6 NA               NA             16 TRUE    #> 10    13     7 NA               NA             16 TRUE    #> # ℹ 999 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"measure-difference-from-randomization-day-to-day-of-first-dose","dir":"Articles","previous_headings":"Calculate Induction Delay","what":"Measure Difference from Randomization Day to Day of First Dose","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"participants received first non-zero dose assigned study drug days assigned treatment arm. subject supplies UDS sample positive substances interest records substance use event TLFB assigned treatment received treatment, count efficacy study drug. NOTE: “intent treat” paradigm, case. example, challenging patients start treatment Naltrexone, evaluating treatment efficacy fairly often requires us include time treatment assignment induction. can see participant 242 received first dose Inpatient NR-NTX 5 days assigned treatment arm. Let’s clean environment move :","code":"inductDelay_df <-   treatTimeLong_df %>%   # Find the day of the first treatment   group_by(who) %>%   arrange(when) %>%   filter(treated) %>%   slice(1) %>%   mutate(treatStart = when) %>%   select(who, when, treatStart) %>%   # Add the first day back to the original data   left_join(treatTimeLong_df, ., by = c(\"who\", \"when\")) %>%   group_by(who) %>%   fill(treatStart, .direction = \"updown\") %>%   # Calculate the delay   filter(randomized == 1) %>%   # This sets time to be missing if the induction was not observed   mutate(inductDelay = treatStart - when) %>%   select(who, treatment, inductDelay) %>%   ungroup()  # Inspect results inductDelay_df #> # A tibble: 9 × 3 #>     who treatment            inductDelay #>   <int> <fct>                      <dbl> #> 1     4 Inpatient NR-NTX               0 #> 2    13 Outpatient BUP                 0 #> 3    17 Methadone                      0 #> 4   163 Outpatient BUP                 0 #> 5   210 Methadone                      0 #> 6   233 Outpatient BUP                 0 #> 7   242 Inpatient NR-NTX               5 #> 8  1103 Outpatient BUP + EMM           0 #> 9  2089 Outpatient BUP                 0 rm(data_ls, treatTimeLong_df)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"partition-visit-weeks-and-impute-missing-visits","dir":"Articles","previous_headings":"","what":"Partition Visit Weeks and Impute Missing Visits","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"Now study day participant received first dose study drug (induction day), can partition study days weeks induction delay pre-study / baseline period study period, respectively.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"backbone-timeline-of-clinical-protocol","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits","what":"“Backbone” Timeline of Clinical Protocol","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"want know visits missed, first need know visits required protocols three studies.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"ctn-0027-and-ctn-0051-protocols","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > “Backbone” Timeline of Clinical Protocol","what":"CTN-0027 and CTN-0051 Protocols","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"code create table subject ID, trial participated , column possible trial contact days, 30 days prior consent 24 weeks . See function documentation CreateProtocolHistory() information.","code":"start_int <- c(`27` = -30L, `51` = -30L) end_int   <- c(`27` = 168L, `51` = 168L) backbone2751_df <-    CreateProtocolHistory(       start_vec = start_int,       end_vec = end_int     ) %>%    filter(who %in% examplePeople_int)  # Inspect  backbone2751_df #> # A tibble: 1,592 × 3 #>      who project  when #>    <int> <chr>   <int> #>  1    13 27        -30 #>  2    13 27        -29 #>  3    13 27        -28 #>  4    13 27        -27 #>  5    13 27        -26 #>  6    13 27        -25 #>  7    13 27        -24 #>  8    13 27        -23 #>  9    13 27        -22 #> 10    13 27        -21 #> # ℹ 1,582 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"ctn-0030-protocol","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > “Backbone” Timeline of Clinical Protocol","what":"CTN-0030 Protocol","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"CTN-0030 protocol adaptive, amount time requested spent study change based participants’ reactions first phase treatment. See function documentation CreateCTN30ProtocolHistory() information. can clearly see protocol length participants CTN-0030 much longer others.","code":"backbone30_df <-     randomization %>%     full_join(everybody, by = \"who\") %>%     filter(project == \"30\") %>%   filter(who %in% examplePeople_int) %>%      CreateCTN30ProtocolHistory() %>%     mutate(project = \"30\") %>%     select(who, project, when)  # Inspect backbone30_df #> # A tibble: 402 × 3 #>      who project  when #>    <int> <chr>   <dbl> #>  1     1 30        -30 #>  2     1 30        -29 #>  3     1 30        -28 #>  4     1 30        -27 #>  5     1 30        -26 #>  6     1 30        -25 #>  7     1 30        -24 #>  8     1 30        -23 #>  9     1 30        -22 #> 10     1 30        -21 #> # ℹ 392 more rows  backbone30_df %>%    group_by(who) %>%    summarise(lastDay = max(when)) #> # A tibble: 2 × 2 #>     who lastDay #>   <int>   <dbl> #> 1     1      98 #> 2  1103     242"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"combined-backbone","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > “Backbone” Timeline of Clinical Protocol","what":"Combined “Backbone”","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"can now combine two datasets clean environment.","code":"backbone_df <-   bind_rows(backbone2751_df, backbone30_df) %>%     arrange(who)  rm(backbone2751_df, backbone30_df, start_int, end_int)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"mark-missing-visits","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits","what":"Mark Missing Visits","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"Now know start treatment range expected participation days per protocol, can take “difference” find participants supposed visit clinic, .","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"data-setup-1","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > Mark Missing Visits","what":"Data Setup","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"Let’s set data example people:","code":"data_ls <- loadRawData(c(\"randomization\", \"visit\"))  data_ls$randomization <-   data_ls$randomization %>%   select(who, when, treatment, randomized = which) %>%   # Remove second randomization events   filter(randomized != 2) %>%    # Retain example participants   filter(who %in% examplePeople_int)  data_ls$visit <-    data_ls$visit %>%    filter(who %in% examplePeople_int)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"add-first-randomization-day","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > Mark Missing Visits","what":"Add First Randomization Day","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"","code":"timelineRand1_df <-     data_ls$randomization %>%     mutate(randomized = randomized == \"1\") %>%     # Join to backbone and arrange within subject by day     full_join(backbone_df, by = c(\"who\", \"when\")) %>%     group_by(who) %>%     arrange(when, .by_group = TRUE) %>%     select(who, project, when, randomized)  # Inspect timelineRand1_df #> # A tibble: 1,994 × 4 #> # Groups:   who [10] #>      who project  when randomized #>    <int> <chr>   <dbl> <lgl>      #>  1     1 30        -30 NA         #>  2     1 30        -29 NA         #>  3     1 30        -28 NA         #>  4     1 30        -27 NA         #>  5     1 30        -26 NA         #>  6     1 30        -25 NA         #>  7     1 30        -24 NA         #>  8     1 30        -23 NA         #>  9     1 30        -22 NA         #> 10     1 30        -21 NA         #> # ℹ 1,984 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"add-on-the-visit-days","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > Mark Missing Visits","what":"Add on the Visit Days","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"(6 7 days, average) data missing values (shown NA) participants expected visit clinic per week.","code":"timelineVisit1_df <-     data_ls$visit %>%     select(who, when, visit, status = what) %>%     filter(status %in% c(\"visit\", \"final\")) %>%     mutate(visit = TRUE) %>%     select(who, when, visit) %>%     left_join(timelineRand1_df, ., by = c(\"who\", \"when\"))  # Inspect timelineVisit1_df #> # A tibble: 1,994 × 5 #> # Groups:   who [10] #>      who project  when randomized visit #>    <int> <chr>   <dbl> <lgl>      <lgl> #>  1     1 30        -30 NA         NA    #>  2     1 30        -29 NA         NA    #>  3     1 30        -28 NA         NA    #>  4     1 30        -27 NA         NA    #>  5     1 30        -26 NA         NA    #>  6     1 30        -25 NA         NA    #>  7     1 30        -24 NA         NA    #>  8     1 30        -23 NA         NA    #>  9     1 30        -22 NA         NA    #> 10     1 30        -21 NA         NA    #> # ℹ 1,984 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"impute-the-missing-visits","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > Mark Missing Visits","what":"Impute the Missing Visits","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"function assign visit values “missing” roughly every seven days visit hasn’t recorded. See function documentation MarkMissing() information. Note: function can take run used thousands participants dozens weeks .","code":"timelineMissing1_df <- MarkMissing(timelineVisit1_df)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"clean-up-the-results","dir":"Articles","previous_headings":"Partition Visit Weeks and Impute Missing Visits > Mark Missing Visits","what":"Clean up the Results","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"aren’t showing results function still need wrangled bit. Let’s now clean environment:","code":"derived_visitImputed <-     timelineMissing1_df %>%   mutate(visit = as.character(visit)) %>%     replace_na(list(visit = \"\", visitYM = \"\")) %>%     mutate(visitImputed = paste0(visit, visitYM)) %>%     mutate(         visitImputed = str_replace(             visitImputed, pattern = \"TRUETRUE\", replacement = \"Present\"         )     ) %>%     select(who, when, visitImputed) %>%     filter(visitImputed != \"\") %>%     ungroup()  # Inspect derived_visitImputed #> # A tibble: 256 × 3 #>      who  when visitImputed #>    <int> <dbl> <chr>        #>  1     1     0 Missing      #>  2     1     7 Missing      #>  3     1    14 Missing      #>  4     1    21 Missing      #>  5     1    28 Missing      #>  6     1    35 Missing      #>  7     1    42 Missing      #>  8     1    49 Missing      #>  9     1    56 Missing      #> 10     1    63 Missing      #> # ℹ 246 more rows rm(   backbone_df, data_ls, timelineMissing1_df, timelineRand1_df, timelineVisit1_df )"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"summarize-weekly-substance-use-results","dir":"Articles","previous_headings":"","what":"Summarize Weekly Substance Use Results","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"step involved, show steps necessary complete task 10 example participants. However, full workflow available . general steps randomized trial participants procedure : Determine treatment arm participant assigned. Recall buprenorphine can used standard treatment illicit substance. Therefore, TLFB record UDS positive buprenorphine particular study day automatically counted “substance misuse”. substance(s) interest (case, opioids), indicate presence (absence) participants’ data streams study visit day. result “long” data table one row per participant per study visit logical value indicating participant used substance(s) interest day. Create “ticker” study days, partition days study weeks. “intent treat” analysis, day 0 randomization day. Otherwise, day 0 induction day calculated . Note: use “intent treat” analysis point . Summarize substance use within study week using quinary word. many participants, least one week wherein one UDS sample supplied. combination logic summarize detected weekly substance use follows: UDS samples within study week positive substance(s) interest, week marked “+”. UDS samples negative substance(s) interest, week marked “-”. mixture, week marked “*”. participant supposed supply urine sample week , week marked “o”. participant supposed supply urine sample week (supply one), week marked “_”. Group weekly summaries trial phase (baseline / pre-randomization, phase 1, phase 2 [CTN-0030 ]) collapse single string. may participants consented join trial never randomized treatment arm. individuals, “complete study summary” required (, must include participants consented, even never randomized), recommend creating use pattern word either “o” “_”.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"data-setup-2","dir":"Articles","previous_headings":"Summarize Weekly Substance Use Results","what":"Data Setup","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"First build data “backbone” (showing mirror work done analysis script): Now create data set combines treatment arm imputed visits data calculated . data set interesting one. one record per participant, per study day, per substance reported. , using UDS, means rows correspond study visit days wherein urine sample supplied positive multiple substances duplicated. used TLFB data instead, data table form orders magnitude longer, many rows per participant per day. visit days wherein substances detected urine participant 0017:","code":"# CTN-0027 and CTN-0051 start_int <- c(`27` = -30L, `51` = -30L) end_int   <- c(`27` = 168L, `51` = 168L) # 24 weeks backbone2751_df <- CreateProtocolHistory(     start_vec = start_int, end_vec = end_int )  # CTN-0030 backbone30_df <-     randomization %>%     full_join(everybody, by = \"who\") %>%     filter(project == \"30\") %>%     CreateCTN30ProtocolHistory() %>%     mutate(project = \"30\") %>%     select(who, project, when)  # All Days backbone_df <- bind_rows(     backbone2751_df, backbone30_df ) %>%     arrange(who) %>%   mutate(project = factor(project, levels = c(\"27\", \"30\", \"51\"))) %>%    filter(who %in% examplePeople_int)  rm(backbone2751_df, backbone30_df, start_int, end_int) randomized_df <-   randomization %>%   filter(who %in% examplePeople_int) %>%    mutate(randomized = as.integer(as.character(which))) %>%   select(who, when, randomized) %>%   left_join(everybody, by = \"who\") %>%   filter( !(randomized == 2 & project %in% c(\"27\", \"51\")) ) %>%   select(-project)  udsUse2_df <-     backbone_df %>%     left_join(randomized_df, by = c(\"who\", \"when\")) %>%     left_join(derived_visitImputed, by = c(\"who\", \"when\")) %>%     left_join(uds, by = c(\"who\", \"when\")) %>%     # So we can use MarkUse() with UDS data (instead of all_drugs)     mutate(source = \"UDS\") udsUse2_df %>%    filter(visitImputed == \"Present\") %>%    filter(!is.na(what)) %>%    filter(who == 17) %>%    print(n = nrow(.)) #> # A tibble: 41 × 7 #>      who project  when randomized visitImputed what           source #>    <int> <fct>   <dbl>      <int> <chr>        <fct>          <chr>  #>  1    17 27          0         NA Present      Amphetamine    UDS    #>  2    17 27          0         NA Present      Benzodiazepine UDS    #>  3    17 27          0         NA Present      Opioid         UDS    #>  4    17 27         21         NA Present      Benzodiazepine UDS    #>  5    17 27         28         NA Present      Benzodiazepine UDS    #>  6    17 27         28         NA Present      Opioid         UDS    #>  7    17 27         35         NA Present      Benzodiazepine UDS    #>  8    17 27         35         NA Present      Opioid         UDS    #>  9    17 27         49         NA Present      Opioid         UDS    #> 10    17 27         56         NA Present      Benzodiazepine UDS    #> 11    17 27         56         NA Present      Cocaine        UDS    #> 12    17 27         56         NA Present      Opioid         UDS    #> 13    17 27         63         NA Present      Benzodiazepine UDS    #> 14    17 27         63         NA Present      Cocaine        UDS    #> 15    17 27         63         NA Present      Opioid         UDS    #> 16    17 27         63         NA Present      Thc            UDS    #> 17    17 27         72         NA Present      Benzodiazepine UDS    #> 18    17 27         72         NA Present      Opioid         UDS    #> 19    17 27         77         NA Present      Benzodiazepine UDS    #> 20    17 27         77         NA Present      Opioid         UDS    #> 21    17 27         84         NA Present      Opioid         UDS    #> 22    17 27         98         NA Present      Opioid         UDS    #> 23    17 27        105         NA Present      Opioid         UDS    #> 24    17 27        112         NA Present      Benzodiazepine UDS    #> 25    17 27        112         NA Present      Cocaine        UDS    #> 26    17 27        112         NA Present      Opioid         UDS    #> 27    17 27        112         NA Present      Thc            UDS    #> 28    17 27        119         NA Present      Benzodiazepine UDS    #> 29    17 27        119         NA Present      Opioid         UDS    #> 30    17 27        126         NA Present      Amphetamine    UDS    #> 31    17 27        126         NA Present      Benzodiazepine UDS    #> 32    17 27        126         NA Present      Opioid         UDS    #> 33    17 27        133         NA Present      Benzodiazepine UDS    #> 34    17 27        133         NA Present      Opioid         UDS    #> 35    17 27        147         NA Present      Benzodiazepine UDS    #> 36    17 27        147         NA Present      Opioid         UDS    #> 37    17 27        156         NA Present      Benzodiazepine UDS    #> 38    17 27        156         NA Present      Opioid         UDS    #> 39    17 27        156         NA Present      Thc            UDS    #> 40    17 27        161         NA Present      Benzodiazepine UDS    #> 41    17 27        161         NA Present      Opioid         UDS"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"participants-assigned-treatment","dir":"Articles","previous_headings":"Summarize Weekly Substance Use Results","what":"Participant’s Assigned Treatment","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"substances considered “approved” “illicit”? Now extract treatment groups clinical trial, can mark “illicit” buprenorphine methadone appropriately. shows us participants assigned buprenorphine, methadone, naltrexone, respectively. can now compare substances present urine substances participants supposed urine. information, see documentation MarkUse() function. drugs marked still individual rows, want get back “one row per person per day”","code":"nonStudyOpioids_ls <- list(   \"Buprenorphine\" = c(\"Opioid\", \"Methadone\"),   \"Methadone\"     = c(\"Opioid\", \"Buprenorphine\"),   \"Naltrexone\"    = c(\"Opioid\", \"Methadone\", \"Buprenorphine\"),   \"Not treated\"   = c(\"Opioid\", \"Methadone\", \"Buprenorphine\") ) treatGroups_ls <-   public.ctn0094data::randomization %>%   filter(who %in% examplePeople_int) %>%    filter(which == 1) %>%   left_join(everybody, by = \"who\") %>%   select(who, treatment) %>%   mutate(     treat_drug = case_when(       str_detect(treatment, \"BUP\") ~ \"Buprenorphine\",       treatment == \"Methadone\" ~ \"Methadone\",       treatment == \"Inpatient NR-NTX\" ~ \"Naltrexone\"     )   ) %>%   select(-treatment) %>%   split(f = .$treat_drug) %>%   map(.f = \"who\")  # Inspect treatGroups_ls #> $Buprenorphine #> [1]   13  163  233 1103 2089 #>  #> $Methadone #> [1]  17 210 #>  #> $Naltrexone #> [1]   4 242 opioidUse_df <-   udsUse2_df %>%   mutate(     treat_group = case_when(       who %in% treatGroups_ls$Buprenorphine ~ \"Buprenorphine\",       who %in% treatGroups_ls$Methadone     ~ \"Methadone\",       who %in% treatGroups_ls$Naltrexone    ~ \"Naltrexone\",       TRUE                                  ~ \"Not treated\"     )   ) %>%   split(f = .$treat_group) %>%   # List of data in alphabetical order, so the non-study drugs ls should match   map2(     .y = nonStudyOpioids_ls,     .f = ~{       # REQUIRES \"source\" COLUMN       MarkUse(         targetDrugs_char = .y,         drugs_df = .x,         # because we have participants with no recorded UDS; in practice DO NOT         #   use this command         retainEmptyRows = TRUE       )      }   ) %>%   bind_rows() %>%   mutate(     udsOpioid = case_when(        is.na(when) ~ NA,       !is.na(when) ~ TRUE     )   ) %>%    select(who, when, udsOpioid) #> Warning: The following drugs were not matched: Methadone. Please check for #> possible spelling/capitalization errors. #> Warning: The following drugs were not matched: Buprenorphine. Please check for #> possible spelling/capitalization errors. #> Warning: The following drugs were not matched: Opioid, Methadone. Please check #> for possible spelling/capitalization errors. #> Warning: No matching drugs found. If you are using the default data set, please #>   see the help file for a list of possible drug choices. timelineUDS_df <-     udsUse2_df %>%     left_join(opioidUse_df, by = c(\"who\", \"when\")) %>%     select(-what, -source) %>%   # 2,089 rows to 1,994     distinct()  rm(   derived_visitImputed, opioidUse_df, randomized_df, treatGroups_ls, udsUse2_df )"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"counting-days-since-randomization","dir":"Articles","previous_headings":"Summarize Weekly Substance Use Results","what":"Counting Days Since Randomization","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"state definition person wasn’t randomized early treatment failure? sense evaluating treatment efficacy, yes; evaluating subject, . Regardless, matter treatment outcome definition, participants without randomization date listed treatment failures “intent treat” paradigm. Now need Study Day ticker (randomized subjects ). Recall CTN-0030 trial participants potentially 2 randomization days.","code":"wasRandomized_int <-     timelineUDS_df %>%     group_by(who) %>%     summarise(randomized = any(randomized %in% 1:2)) %>%     filter(randomized) %>%     pull(who) notRandomized_int <-     timelineUDS_df %>%     filter( !(who %in% wasRandomized_int) ) %>%     pull(who) %>%     unique()  # Was randomized: wasRandomized_int #> [1]    4   13   17  163  210  233  242 1103 2089  # Wasn't notRandomized_int #> [1] 1 timelineUDS2_df <-     timelineUDS_df %>%     filter(who %in% wasRandomized_int) %>%     group_by(who) %>%   filter(!is.na(randomized)) %>%     mutate(         whenRandomized1 = case_when(randomized == 1 ~ when),         whenRandomized2 = case_when(randomized == 2 ~ when)     ) %>%     select(who, when, whenRandomized1, whenRandomized2) %>%     left_join(timelineUDS_df, ., by = c(\"who\", \"when\")) %>%     filter(who %in% wasRandomized_int) %>%     # Add back in the groupings BEFORE the fill()     group_by(who) %>%     fill(whenRandomized1, .direction = \"updown\") %>%     fill(whenRandomized2, .direction = \"updown\") %>%     mutate(daysSinceRand1 = when - whenRandomized1) %>%     mutate(daysSinceRand2 = when - whenRandomized2) %>%     select(-whenRandomized1, -whenRandomized2)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"symbolically-summarize-participant-uds-by-study-week","dir":"Articles","previous_headings":"Summarize Weekly Substance Use Results","what":"Symbolically Summarize Participant UDS by Study Week","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"puts first day “study week 1” day randomization, day consent, consent signed also day randomization. Now assign single symbol represent UDS results participant week. symbols (+) positive UDS, (–) negative UDS, (*) least one positive negative UDS, (o) UDS required collected, (_) UDS required. split rows trial phase, collapse weekly symbols single string. Notice opioid UDS results subject week split various phases clinical trial. summaries quinary word format, following work Odom et al. (2023) [https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10490938/]. last step randomized participants mark study weeks phases start end.","code":"weeklyUse_df <-   timelineUDS2_df %>%   # The (daysSinceRand1 - 1) adjustment is to ensure that the first study week   #   is a full 7 days, since \"day 0\" is the day before randomization. The \"+1\"   #   at the end is to shift the study week label such that \"week 0\" is the    #   week *BEFORE* treatment, rather than the first week of treatment. So, the   #   randomization day is the last day of \"week 0\" (the pre-treatment period).   mutate(studyWeek1 = (daysSinceRand1 - 1) %/% 7 + 1) %>%   mutate(studyWeek2 = (daysSinceRand2 - 1) %/% 7 + 1) %>%   group_by(who, studyWeek1) %>%   # There are some study weeks with multiple UDS, so we count the number of   #   positive and negative UDS per week.   summarise(     nPosUDS  = sum(udsOpioid == 1, na.rm = TRUE),     nNegUDS  = sum(visitImputed == \"Present\" & is.na(udsOpioid), na.rm = TRUE),     nMissing = sum(visitImputed == \"Missing\", na.rm = TRUE),     randWk1  = sum(randomized == 1, na.rm = TRUE) > 0,     randWk2  = sum(randomized == 2 & project == \"30\", na.rm = TRUE) > 0   ) %>%   ungroup() useByWeekRandomized_df <-   weeklyUse_df %>%     mutate(         udsStatus = case_when(             # If we see a positive UDS and no negative UDS, it's positive             nPosUDS > 0  & nNegUDS == 0 ~ \"+\",             # If we see a negative UDS and no positive UDS, it's negative             nPosUDS == 0 & nNegUDS > 0  ~ \"-\",             # If we see both positive and negative UDS in a single week, it's both             #   (note that we can recode all \"B\"s to be \"+\" as necessary)             nPosUDS > 0  & nNegUDS > 0  ~ \"*\",             # If we don't have any UDS in a week after randomization, it's missing             # UPDATE 2022-03-08: I had this as a 0 originally, and I was using this             #   in context of consent, not randomization. This was wrong.             nPosUDS == 0 & nNegUDS == 0 & studyWeek1 >= 1 ~ \"o\",             # If none of the above are true, but we still have a missing value as             #   marked by the MarkMissing() function, then it's missing             nMissing > 0 ~ \"o\",             # If none of the above conditions are true (probably because it's a week             #   before randomization but not during a baseline visit for consent),             #   then leave it blank (pre-study)             TRUE ~ \"_\"         )     ) %>%   group_by(who) %>%   # For CTN-0030, Phase II could have started on any day of the week, even in   #   the middle of a treatment week. If we try to start counting Phase II   #   weeks the day after treatment arms are switched, we can end up with the   #   last \"week\" of Phase I not having 7 days. I'm going to leave the first   #   week of Phase II as whatever week the switch happened in.   mutate(     rand1Active = studyWeek1 > 0,     # This returns 0 for any week before the Phase II randomization, and 1 for     #   the Phase II randomization week and all subsequent weeks (because the     #   randWk2 column is 1 only for the week of second randomization and 0      #   all other rows).     rand2Active = cumsum(randWk2),     trialPhase  = rand1Active + rand2Active   ) %>%     select(       who, studyWeek = studyWeek1, randWk1, randWk2, udsStatus, trialPhase     ) weeklyOpioidPatterns_df <-   useByWeekRandomized_df %>%   mutate(     phase = case_when(       trialPhase == 0L ~ \"Baseline\",       trialPhase == 1L ~ \"Phase_1\",       trialPhase == 2L ~ \"Phase_2\"     )   ) %>%   group_by(who, phase) %>%   summarise(     usePattern = paste0(udsStatus, collapse = \"\")   ) %>%   pivot_wider(names_from = \"phase\", values_from = \"usePattern\")  weeklyOpioidPatterns_df #> # A tibble: 9 × 4 #> # Groups:   who [9] #>     who Baseline Phase_1                  Phase_2                   #>   <int> <chr>    <chr>                    <chr>                     #> 1     4 ____-    --------------------o-oo NA                        #> 2    13 ____*    -------o---o-ooooooooooo NA                        #> 3    17 _____+-  o-++*++++++-++++++-+++-  NA                        #> 4   163 _____*   ----oo---o--o*-o-------o NA                        #> 5   210 _____*   ++++++++-+++-----o-----o NA                        #> 6   233 ____*    +++++++++++++++++++++++o NA                        #> 7   242 ____+_   -----------------------  NA                        #> 8  1103 ____+    +o--oo--o                *+-+---o---------o-o-o-o- #> 9  2089 ____*    ++++---+---------------- NA derived_weeklyOpioidPatternRand <-   useByWeekRandomized_df %>%   mutate(     randWeek1  = randWk1 * studyWeek,     randWeek2  = randWk2 * studyWeek   ) %>%   summarise(     startWeek  = min(studyWeek),     randWeek1  = max(randWeek1),     randWeek2  = if_else( all(randWeek2 == 0), NA_real_, max(randWeek2) ),     endWeek    = max(studyWeek)   ) %>%   # View this smaller data set before joining. In practice, you can comment out   #   this print() command.   print() %>%    left_join(weeklyOpioidPatterns_df, by = \"who\") #> # A tibble: 9 × 5 #>     who startWeek randWeek1 randWeek2 endWeek #>   <int>     <dbl>     <dbl>     <dbl>   <dbl> #> 1     4        -4         0        NA      24 #> 2    13        -4         0        NA      24 #> 3    17        -6         0        NA      23 #> 4   163        -5         0        NA      24 #> 5   210        -5         0        NA      24 #> 6   233        -4         0        NA      24 #> 7   242        -5         0        NA      23 #> 8  1103        -4         0        10      34 #> 9  2089        -4         0        NA      24"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"symbolically-summarize-non-randomized-participants-uds-by-study-week","dir":"Articles","previous_headings":"Summarize Weekly Substance Use Results","what":"Symbolically Summarize Non-Randomized Participants UDS by Study Week","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"strange cases non-randomized participants also submitted UDS samples clinical trial. also create quinary words participants, note UDS results missing (symbolized “o”). Although present small data example, positive UDS events among non-randomized. construct “study week” ticker mark weekly UDS results. participants randomized , “Phase ” missing values. Finally, add start end weeks two phases.","code":"nonRandUDS_df <-     backbone_df %>%     filter(who %in% notRandomized_int) %>%     left_join(uds) %>%     # MarkUse() requires a \"source\" column     mutate(source = \"UDS\") %>%     MarkUse(         targetDrugs_char = nonStudyOpioids_ls$`Not treated`,         drugs_df = .     ) %>%   mutate(     udsOpioid = case_when(       !is.na(when) ~ TRUE,        is.na(when) ~ NA     )   ) %>%      select(who, when, udsOpioid) %>%   # Uneccessary here, but some UDS records are duplicated     distinct() timelineNonRandUDS_df <-     backbone_df %>%     filter(who %in% notRandomized_int) %>%     left_join(nonRandUDS_df, by = c(\"who\", \"when\")) %>%   # Because this week moves off of the consent date, there is no reason to add   #   a `(week - 1)` adjustment   mutate(studyWeek = when %/% 7 + 1) %>%     group_by(who, studyWeek) %>%     summarise(         posUDS  = sum(udsOpioid == 1, na.rm = TRUE) > 0     ) weeklyNonRandPatterns_df <-   timelineNonRandUDS_df %>%   mutate(     udsStatus = case_when(       # If they are positive, they are positive       posUDS ~ \"+\",       # If they aren't positive and it's after the consent week, they are       #   missing (because they weren't randomized)       !posUDS & studyWeek >= 1 ~ \"o\",       # If they aren't positive and it's on or before the consent week, then       #   leave it blank (pre-study)       !posUDS & studyWeek < 1 ~ \"_\"     )   ) %>%   mutate(     phase = case_when(       studyWeek <  1 ~ \"Baseline\",       studyWeek >= 1 ~ \"Phase_1\"     )   ) %>%   # Again, this print is unecessary, but here it make clear what we are doing   print() %>%    group_by(who, phase) %>%   summarise(     usePattern = paste0(udsStatus, collapse = \"\")   ) %>%   pivot_wider(names_from = \"phase\", values_from = \"usePattern\") %>%   ungroup() #> # A tibble: 20 × 5 #> # Groups:   who [1] #>      who studyWeek posUDS udsStatus phase    #>    <int>     <dbl> <lgl>  <chr>     <chr>    #>  1     1        -4 FALSE  _         Baseline #>  2     1        -3 FALSE  _         Baseline #>  3     1        -2 FALSE  _         Baseline #>  4     1        -1 FALSE  _         Baseline #>  5     1         0 FALSE  _         Baseline #>  6     1         1 FALSE  o         Phase_1  #>  7     1         2 FALSE  o         Phase_1  #>  8     1         3 FALSE  o         Phase_1  #>  9     1         4 FALSE  o         Phase_1  #> 10     1         5 FALSE  o         Phase_1  #> 11     1         6 FALSE  o         Phase_1  #> 12     1         7 FALSE  o         Phase_1  #> 13     1         8 FALSE  o         Phase_1  #> 14     1         9 FALSE  o         Phase_1  #> 15     1        10 FALSE  o         Phase_1  #> 16     1        11 FALSE  o         Phase_1  #> 17     1        12 FALSE  o         Phase_1  #> 18     1        13 FALSE  o         Phase_1  #> 19     1        14 FALSE  o         Phase_1  #> 20     1        15 FALSE  o         Phase_1  weeklyNonRandPatterns_df #> # A tibble: 1 × 3 #>     who Baseline Phase_1         #>   <int> <chr>    <chr>           #> 1     1 _____    ooooooooooooooo derived_weeklyOpioidPatternNonRand <-   timelineNonRandUDS_df %>%   group_by(who) %>%   summarise(     startWeek  = min(studyWeek),     randWeek1  = NA_real_,     randWeek2  = NA_real_,     endWeek    = max(studyWeek)   ) %>%   left_join(weeklyNonRandPatterns_df, by = \"who\")"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"final-product","dir":"Articles","previous_headings":"Summarize Weekly Substance Use Results","what":"Final Product","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"end long process, :","code":"derived_weeklyOpioidPattern <-     derived_weeklyOpioidPatternRand %>%     bind_rows(derived_weeklyOpioidPatternNonRand) %>%     arrange(who) %>%   replace_na(list(Phase_2 = \"\"))  derived_weeklyOpioidPattern #> # A tibble: 10 × 8 #>      who startWeek randWeek1 randWeek2 endWeek Baseline Phase_1          Phase_2 #>    <int>     <dbl>     <dbl>     <dbl>   <dbl> <chr>    <chr>            <chr>   #>  1     1        -4        NA        NA      15 _____    ooooooooooooooo  \"\"      #>  2     4        -4         0        NA      24 ____-    ---------------… \"\"      #>  3    13        -4         0        NA      24 ____*    -------o---o-oo… \"\"      #>  4    17        -6         0        NA      23 _____+-  o-++*++++++-+++… \"\"      #>  5   163        -5         0        NA      24 _____*   ----oo---o--o*-… \"\"      #>  6   210        -5         0        NA      24 _____*   ++++++++-+++---… \"\"      #>  7   233        -4         0        NA      24 ____*    +++++++++++++++… \"\"      #>  8   242        -5         0        NA      23 ____+_   ---------------… \"\"      #>  9  1103        -4         0        10      34 ____+    +o--oo--o        \"*+-+-… #> 10  2089        -4         0        NA      24 ____*    ++++---+-------… \"\""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/articles/summarizing_substance_use.html","id":"wrapping-up","dir":"Articles","previous_headings":"","what":"Wrapping Up","title":"Summarizing Longitudinal Substance Use as Quinary Words","text":"","code":"sessionInfo() #> R version 4.3.2 (2023-10-31) #> Platform: x86_64-pc-linux-gnu (64-bit) #> Running under: Ubuntu 22.04.3 LTS #>  #> Matrix products: default #> BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  #> LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0 #>  #> locale: #>  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        #>  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    #>  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           #> [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    #>  #> time zone: UTC #> tzcode source: system (glibc) #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #> [1] stringr_1.5.0             tidyr_1.3.0               #> [3] tibble_3.2.1              purrr_1.0.2               #> [5] dplyr_1.1.3               public.ctn0094extra_1.0.3 #> [7] public.ctn0094data_1.0.6  #>  #> loaded via a namespace (and not attached): #>  [1] jsonlite_1.8.7    compiler_4.3.2    tidyselect_1.2.0  jquerylib_0.1.4   #>  [5] systemfonts_1.0.5 textshaping_0.3.7 yaml_2.3.7        fastmap_1.1.1     #>  [9] R6_2.5.1          generics_0.1.3    knitr_1.45        desc_1.4.2        #> [13] rprojroot_2.0.4   bslib_0.5.1       pillar_1.9.0      rlang_1.1.2       #> [17] utf8_1.2.4        cachem_1.0.8      stringi_1.8.1     xfun_0.41         #> [21] fs_1.6.3          sass_0.4.7        memoise_2.0.1     cli_3.6.1         #> [25] withr_2.5.2       pkgdown_2.0.7     magrittr_2.0.3    digest_0.6.33     #> [29] lifecycle_1.0.4   vctrs_0.6.4       evaluate_0.23     glue_1.6.2        #> [33] ragg_1.2.6        fansi_1.0.5       rmarkdown_2.25    tools_4.3.2       #> [37] pkgconfig_2.0.3   htmltools_0.5.7"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Gabriel Odom. Author, maintainer. Raymond Balise. Author.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Odom G, Balise R (2023). public.ctn0094extra: Helper Files CTN-0094 Relational Database. R package version 1.0.3, https://ctn-0094.github.io/public.ctn0094extra/.","code":"@Manual{,   title = {public.ctn0094extra: Helper Files for the CTN-0094 Relational Database},   author = {Gabriel Odom and Raymond Balise},   year = {2023},   note = {R package version 1.0.3},   url = {https://ctn-0094.github.io/public.ctn0094extra/}, }"},{"path":[]},{"path":"https://ctn-0094.github.io/public.ctn0094extra/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"Helper Files for the CTN-0094 Relational Database","text":"helper functions CTN-0094 data package public.ctn0094data supplemental engineered / derived data sets.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/index.html","id":"installing-dependencies","dir":"","previous_headings":"Introduction","what":"Installing Dependencies","title":"Helper Files for the CTN-0094 Relational Database","text":"“Extra” package supplements information primary public.ctn0094data:: package, must recent version primary data package built first. package CRAN https://CRAN.R-project.org/package=public.ctn0094data, can install data package : access GitHub repository development version data package, use remotes package install data package GitHub: build package “zipped” source file local machine, run following code (make sure set correct version path machine):","code":"install.packages(\"public.ctn0094data\") remotes::install_github('https://github.com/CTN-0094/public.ctn0094data') install.packages(   '/Users/gabrielodom/Desktop/public.ctn0094data_0.9.0.tar.gz',   repos = NULL,   type = 'source' )"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/index.html","id":"installing-this-package","dir":"","previous_headings":"Introduction","what":"Installing this Package","title":"Helper Files for the CTN-0094 Relational Database","text":"public.ctn0094data package downloaded installed computer, can install package. now, use remotes package install package directly GitHub via public.ctn0094data public.ctn0094extra released CRAN, able install package :","code":"remotes::install_github('https://github.com/CTN-0094/public.ctn0094extra') # Do not run yet # install.packages(\"public.ctn0094extra\")"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/index.html","id":"workflow","dir":"","previous_headings":"","what":"Workflow","title":"Helper Files for the CTN-0094 Relational Database","text":"order recreate data sets package, first build package (public.ctn0094extra::) run following scripts order, rebuilding package restarting R session script: inst/scripts/create_inductDelay_20220308.R inst/scripts/create_visitImputed_20220308.R inst/scripts/create_weeklyOpioidPattern_20220308.R inst/scripts/create_weeklyTLFBPattern_20220511.R inst/scripts/create_raceEthnicity_20220816.R","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateCTN30ProtocolHistory.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Subject History Table by Protocol — CreateCTN30ProtocolHistory","title":"Create a Subject History Table by Protocol — CreateCTN30ProtocolHistory","text":"Create Subject History Table Protocol","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateCTN30ProtocolHistory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Subject History Table by Protocol — CreateCTN30ProtocolHistory","text":"","code":"CreateCTN30ProtocolHistory(   randCTN30_df,   start_int = -30,   phase1Len_int = 98,   phase2Len_int = 168 )"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateCTN30ProtocolHistory.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Subject History Table by Protocol — CreateCTN30ProtocolHistory","text":"randCTN30_df data frame subject randomization days CTN-0030. data columns , , . start_int protocol timeline start? Defaults 30 days consent (allowing self-reported drug use via Timeline Follow- Back data). phase1Len_int Phase end per protocol? Defaults 98 days (14 weeks). phase2Len_int Phase II end per protocol? Defaults 168 days (24 weeks).","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateCTN30ProtocolHistory.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Subject History Table by Protocol — CreateCTN30ProtocolHistory","text":"tibble columns . subject one row day study range.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateCTN30ProtocolHistory.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a Subject History Table by Protocol — CreateCTN30ProtocolHistory","text":"may want perform SQL-like operations set tables. data table form \"backbone\" future join operations. creates one record per person study day study, designed work subject-specific two-arm protocols (Phase Phase II treatments start different days subject). subjects consented treatment never randomized, use \"intent treat\" philosophy assign empty protocol timeline starting day consent (day 0) phase1Len_int. NOTE: expect function used specifically create potential visit backbone CTN-0030. studies fixed protocol lengths, please use CreateSubjectHistory() instead.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateCTN30ProtocolHistory.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Subject History Table by Protocol — CreateCTN30ProtocolHistory","text":"","code":"# Subject A started Phase I on day 2 and was switched from treatment    #   Phase I to Phase II on day 45. Subject B started Phase I on day 6 and    #   was never switched to Phase II (either because they dropped out of the    #   study or because the treatment given to them in Phase I worked).    rand_df <- data.frame(      who   = c(\"A\", \"A\", \"B\", \"B\"),      which = c(  1,   2,   1,   2),      when  = c(  2,  45,   6,  NA)    )     # Based on this example data above, we expect to see potential contact    #   days per the protocol for subject A to range from -30 to 45 + 168.    #   For subject B, we expect this range to be from -30 to 6 + 98    CreateCTN30ProtocolHistory(rand_df) #> # A tibble: 379 × 2 #>    who    when #>    <chr> <dbl> #>  1 A       -30 #>  2 A       -29 #>  3 A       -28 #>  4 A       -27 #>  5 A       -26 #>  6 A       -25 #>  7 A       -24 #>  8 A       -23 #>  9 A       -22 #> 10 A       -21 #> # ℹ 369 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateHistory.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Subject History Table — CreateHistory","title":"Create a Subject History Table — CreateHistory","text":"Create Subject History Table","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateHistory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Subject History Table — CreateHistory","text":"","code":"CreateHistory(   rawData_ls,   personsTable = \"everybody\",   firstDay_int = NULL,   lastDay_int = NULL )"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateHistory.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Subject History Table — CreateHistory","text":"rawData_ls list tibbles returned loadRawData personsTable name data table contains subject IDs? Defaults \"everybody\". table exists, set value \"none\" unique subject IDs drawn tables rawData_ls firstDay_int (OPTIONAL) first \"day\" counter subjects? may beneficial set wish History ignore days certain point. lastDay_int (OPTIONAL) last \"day\" counter subjects?","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateHistory.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Subject History Table — CreateHistory","text":"tibble columns . subject one row day study range.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateHistory.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a Subject History Table — CreateHistory","text":"may want perform SQL-like operations set tables. data table form \"backbone\" future join operations. creates one record per person day study. default behavior set date range smallest observed value \"\" across data tables largest observed value \"\" across tables, inclusive. Necessarily, sensitive outliers coding errors (instance, one subject \"first day\" 200 days Study Day 0, History table include days -200 -1 subjects, regardless recorded contact period). behavior desirable, must specify study range. example, may short recruitment period followed 6-month clinical trial. instance, may want ignore data 30 days prior Study Day 0 subject weeks end trial. Thus, set firstDay_int = -30L lastDay_int = 6 * 30 + 14.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateHistory.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Subject History Table — CreateHistory","text":"","code":"data_ls <- loadRawData(c(\"tlfb\", \"all_drugs\", \"everybody\"))    CreateHistory(rawData_ls = data_ls, firstDay_int = -30) #> # A tibble: 2,459,960 × 2 #>      who  when #>    <int> <dbl> #>  1     8   -30 #>  2     8   -29 #>  3     8   -28 #>  4     8   -27 #>  5     8   -26 #>  6     8   -25 #>  7     8   -24 #>  8     8   -23 #>  9     8   -22 #> 10     8   -21 #> # ℹ 2,459,950 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateProtocolHistory.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Subject History Table by Protocol — CreateProtocolHistory","title":"Create a Subject History Table by Protocol — CreateProtocolHistory","text":"Create Subject History Table Protocol","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateProtocolHistory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Subject History Table by Protocol — CreateProtocolHistory","text":"","code":"CreateProtocolHistory(start_vec, end_vec, persons_df = \"everybody\")"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateProtocolHistory.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Subject History Table by Protocol — CreateProtocolHistory","text":"start_vec named integer vector number days subject consent subject history start, per protocol end_vec named integer vector length study phase interest, per protocol persons_df Either name data frame contains subject IDs clinical trials (defaults \"everybody\"), data frame information. See \"Details\" information.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateProtocolHistory.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Subject History Table by Protocol — CreateProtocolHistory","text":"tibble columns , project, . subject one row day study range.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateProtocolHistory.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a Subject History Table by Protocol — CreateProtocolHistory","text":"may want perform SQL-like operations set tables. data table form \"backbone\" future join operations. creates one record per person study day studies (persons_df set \"everybody\"), creates one record per person contained table persons_df day studies. default behavior use supplied \"everybody\" table consenting subjects CTN-0027, CTN-0030, CTN-0051 clinical trials. However, users may care smaller subset patients, subset \"everybody\" data frame can supplied persons_df argument desired. NOTE: function appropriate trial fixed start end days (CTN-0027 CTN-0051). studies variable-length (.e., subject-specific) protocol lengths, please use CreateSubjectProtocolHistory() instead.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/CreateProtocolHistory.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Subject History Table by Protocol — CreateProtocolHistory","text":"","code":"start_int <- c(`27` = -30L, `51` = -30L)    end_int   <- c(`27` = 168L, `51` = 168L)        CreateProtocolHistory(      start_vec = start_int, end_vec = end_int    ) #> # A tibble: 535,708 × 3 #>      who project  when #>    <int> <chr>   <int> #>  1     8 27        -30 #>  2     8 27        -29 #>  3     8 27        -28 #>  4     8 27        -27 #>  5     8 27        -26 #>  6     8 27        -25 #>  7     8 27        -24 #>  8     8 27        -23 #>  9     8 27        -22 #> 10     8 27        -21 #> # ℹ 535,698 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkMissing.html","id":null,"dir":"Reference","previous_headings":"","what":"Code Empty Visit Values as ","title":"Code Empty Visit Values as ","text":"Given complete timeline potential subject visits per study protocol, mark certain visits \"Missing\"","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkMissing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Code Empty Visit Values as ","text":"","code":"MarkMissing(timeline_df, windowWidth = 7, daysGrace = 0)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkMissing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Code Empty Visit Values as ","text":"timeline_df data frame columns , , visit randomized. data frame measures days subjects visited clinic (visit) indicates subjects randomized Phase respective studies (randomized column). data set contain one (one) record per subject per day; enough rows cover potential visits per protocol length study. windowWidth many days expected clinic visits? Defaults 7, representing weekly clinic visits. daysGrace many days late subjects allowed weekly visit. Defaults 0. default behavior weekly visits, subject visits clinic days 8 14 instead days 7 14 missing visit imputed day 7.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkMissing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Code Empty Visit Values as ","text":"copy timeline_df column visitYM added. column copy visit column additional cells marking subject attended clinic .","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkMissing.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Code Empty Visit Values as ","text":"definitions opioid use disorder treatment success failure partially depend tally number missed clinic visits. example, definition early treatment failure \"3 UDS positive non-study opioids missing visits within first 28 days randomization\". Given table subject visits day entire protocol timeline, function estimate subject missed clinic visit (unfortunately, missed visits can often improperly recorded patient logs; information complete, using function unnecessary). estimation conducted follows: (1) first, subject, regular grid days spread randomization day end treatment windowWidth; (2) next, iterate day regular grid, step check next windowWidth plus daysGrace days visit range, mark day end window \"missing\" visits range; (3) finally, combine subject-specific data tables.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkMissing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Code Empty Visit Values as ","text":"","code":"# TO DO"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkUse.html","id":null,"dir":"Reference","previous_headings":"","what":"Mark Use Day by Subject — MarkUse","title":"Mark Use Day by Subject — MarkUse","text":"Mark Use Day Subject","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkUse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mark Use Day by Subject — MarkUse","text":"","code":"MarkUse(   targetDrugs_char,   drugs_df = NULL,   reportSource = c(\"TFB\", \"UDSAB\", \"UDS\"),   retainEmptyRows = FALSE )"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkUse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mark Use Day by Subject — MarkUse","text":"targetDrugs_char character vector including drugs counted subject drugs_df data frame columns , , . data frame measures drugs used subject days treatment. data set must also include column source, marks reporting source drug use recorded reportSource character vector matching source reported drug use. options must Timeline Followback (\"TFB\") questionnaires daily urine drug screens (\"UDS\" \"UDSAB\"). retainEmptyRows logical flag force rows participants UDS positive substances listed targetDrugs_char retained final results (NA \"\" \"source\"). Defaults FALSE entire point function mark substance USE, lack thereof; however, flag needed vignette (forced inclusion participant recorded UDS pedagogical purposes).","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkUse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mark Use Day by Subject — MarkUse","text":"modification drugs_df data set: columns \"\", \"\", \"source\"; row corresponds one use day per subject per use source (, instance, drug use particular day recorded TFB UDS, day two rows resulting data set).","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkUse.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Mark Use Day by Subject — MarkUse","text":"function basically just fancy wrapper around dplyr code. just want user 1) know dplyr, 2) write code .","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/MarkUse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mark Use Day by Subject — MarkUse","text":"","code":"MarkUse(c(\"Crack\", \"Pcp\", \"Opioid\")) #> # A tibble: 29,587 × 3 #>      who  when source #>    <int> <dbl> <fct>  #>  1     2     0 UDS    #>  2     2     7 UDS    #>  3     2    97 UDS    #>  4     3    -9 TFB    #>  5     3   196 UDS    #>  6     4   -47 TFB    #>  7     4   -46 TFB    #>  8     4   -45 TFB    #>  9     4   -44 TFB    #> 10     4   -43 TFB    #> # ℹ 29,577 more rows"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_inductDelay.html","id":null,"dir":"Reference","previous_headings":"","what":"Derived Induction Delay Data — derived_inductDelay","title":"Derived Induction Delay Data — derived_inductDelay","text":"data set measures number days participant's randomization received first dose study drug.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_inductDelay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Derived Induction Delay Data — derived_inductDelay","text":"","code":"data(derived_inductDelay)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_inductDelay.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Derived Induction Delay Data — derived_inductDelay","text":"tibble 2,492 rows 3 variables: Patient ID treatment treatment prescribed: \"Inpatient BUP\", \"Inpatient NR-NTX\", \"Methadone\", \"Outpatient BUP\", \"Outpatient BUP + EMM\", \"Outpatient BUP + SMM\" inductDelay many days assigned treatment arm participant receive first dose study drug? Missing values indicate subject never received first dose.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_inductDelay.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Derived Induction Delay Data — derived_inductDelay","text":"data set derived data set. inputs treatment randomization data sets. code calculate induction delay given scripts/create_inductDelay_20210729.R. treatment arm also included data set induction delay depends type treatment. example, inpatient treatment arms may different protocols outpatient treatment arms determining many days subject must wait randomization treatment.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_raceEthnicity.html","id":null,"dir":"Reference","previous_headings":"","what":"Derived Patient Race and Ethnicity Data — derived_raceEthnicity","title":"Derived Patient Race and Ethnicity Data — derived_raceEthnicity","text":"Summarize patients' self-reported race ethnicity four groups: \"Non-Hispanic White\", \"Non-Hispanic Black\", \"Hispanic\", \"\".","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_raceEthnicity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Derived Patient Race and Ethnicity Data — derived_raceEthnicity","text":"","code":"data(derived_raceEthnicity)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_raceEthnicity.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Derived Patient Race and Ethnicity Data — derived_raceEthnicity","text":"tibble 3,560 rows columns: Patient ID race Self-reported race. Options \"White\", \"Black\", \"\", \"Refused/missing\". is_hispanic Self-reported Hispanic/Latino ethnicity. race_ethnicity Derived composite marker race ethnicity.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_raceEthnicity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Derived Patient Race and Ethnicity Data — derived_raceEthnicity","text":"data set contains summary self-reported race ethnicity four levels. note, \"\" category includes 2 participants marked \"\" question Hispanic/Latino ethnicity refused answer race. Also, \"\" category includes 33 participants information race ethnicity missing. data set derived data set; script used create \"scripts/create_raceEthnicity_20220816.R\".","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_visitImputed.html","id":null,"dir":"Reference","previous_headings":"","what":"Imputed Patient Visit Data — derived_visitImputed","title":"Imputed Patient Visit Data — derived_visitImputed","text":"Given series weekly clinic visits described per protocol, data marks subjects present missing.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_visitImputed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Imputed Patient Visit Data — derived_visitImputed","text":"","code":"data(derived_visitImputed)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_visitImputed.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Imputed Patient Visit Data — derived_visitImputed","text":"tibble 87,891 rows columns: Patient ID Study day visitImputed Marked \"Present\" subject visited clinic day, \"Missing\" subject visit clinic day expected (based regular weekly visits).","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_visitImputed.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Imputed Patient Visit Data — derived_visitImputed","text":"contains planned visits. appointments kept. indicate appointment kept certain day marking subject \"Present\" day. subject goes 7 days without clinic visit, mark subject \"Missing\" days multiples 7 randomization day. subjects without randomization day, weekly visits day consent marked \"Missing\" instead. data set derived data set; script used create \"scripts/create_visitImputed_20210909.R\". NOTE: window strict weekly window, subject shows clinic visit one days late still marked missing day supposed appear. means subjects marked missed weekly clinic visit one day, present clinic next.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyOpioidPattern.html","id":null,"dir":"Reference","previous_headings":"","what":"Patient UDS Opioid Weekly Pattern Data — derived_weeklyOpioidPattern","title":"Patient UDS Opioid Weekly Pattern Data — derived_weeklyOpioidPattern","text":"Show pattern positive, negative, missing urine drug screen (UDS) results opioids patient study protocol. Study \"Week 1\" starts day randomization (patients randomized) day signed consent (patients randomized).","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyOpioidPattern.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Patient UDS Opioid Weekly Pattern Data — derived_weeklyOpioidPattern","text":"","code":"data(derived_weeklyOpioidPattern)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyOpioidPattern.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Patient UDS Opioid Weekly Pattern Data — derived_weeklyOpioidPattern","text":"tibble 3,560 rows columns: Patient ID startWeek start \"word\" many weeks randomization? -4 people, can high -8. Note week 0 included, value -4 represents data 5th week randomization; , 29-35 days prior randomization. subjects timeline follow-back data 30 days consent, delays consent randomization common. randWeek1 Week first randomization (1, randomized; NA ) randWeek2 Week second randomization (CTN-0030) endWeek end \"word\" many weeks randomization? depends study protocol, close 16 24 weeks subjects. Baseline character string symbols startWeek last week randWeek1. Symbols defined Phase_1. Phase_1 character string symbols randWeek1 endWeek (subjects CTN-0027 CTN-0051) last week randWeek2 (CTN-0030). symbols : \"+\" = subject's UDS showed presence opioid week; \"-\" = subject's UDS showed absence opioid week; \"*\" = two UDS week, >= 1 UDS positive >= 1 UDS negative; \"o\" subject supposed visit clinic per study protocol visit complete UDS screen; \"_\" represent weeks wherein subject scheduled provide UDS. Phase_2 character string symbols randWeek2 endWeek subjects CTN-0030 . Symbols defined Phase_1.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyOpioidPattern.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Patient UDS Opioid Weekly Pattern Data — derived_weeklyOpioidPattern","text":"data set contains \"word\" describing weekly non-study opioid use patterns measured UDS. Based substances screened data set, list substances classified opioid : Oxymorphone, Opium, Fentanyl, Hydromorphone, Codeine, Suboxone, Tramadol, Morphine, Buprenorphine, Hydrocodone, Opioid, Methadone, Oxycodone, Heroin. UDS results indicating presence one substances marked \"+\" week. UDS results negative substances marked \"-\". , study protocol, subject supposed visit clinic complete UDS , visit week marked \"o\". , study protocol, subject supposed visit clinic complete UDS given week, visit week marked \"_\". data set derived data set; script used create \"scripts/create_weeklyOpioidPattern_20211123.R\". NOTE: window strict weekly window, subject positive negative UDS within 7-day period. case, week marked \"*\". Depending definition treatment failure treatment success desired, dual-status indicators can re-coded \"+\" \"-\" appropriate. Also, studies include baseline UDS week consent (subject randomized treatment arm). subjects randomized week week wherein consent signed, subjects randomized weeks later. represent weeks consent variable number weeks consent randomization \"_\" baseline UDS visits weeks (represents pre-study period). subjects never randomized, weeks consent also marked pre-study (\"_\"), subsequent protocol weeks marked missing.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyTLFBPattern.html","id":null,"dir":"Reference","previous_headings":"","what":"Patient TLFB Opioid Weekly Pattern Data — derived_weeklyTLFBPattern","title":"Patient TLFB Opioid Weekly Pattern Data — derived_weeklyTLFBPattern","text":"Show pattern positive negative patient self-report (timeline follow-back, TLFB) results opioids patient study protocol. Study \"Week 1\" starts day randomization (patients randomized) day signed consent (patients randomized).","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyTLFBPattern.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Patient TLFB Opioid Weekly Pattern Data — derived_weeklyTLFBPattern","text":"","code":"data(derived_weeklyTLFBPattern)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyTLFBPattern.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Patient TLFB Opioid Weekly Pattern Data — derived_weeklyTLFBPattern","text":"tibble 3,560 rows columns: Patient ID startWeek start \"word\" many weeks randomization? -4 people, can high -8. Note week 0 included, value -4 represents data 5th week randomization; , 29-35 days prior randomization. subjects timeline follow-back data 30 days consent, delays consent randomization common. randWeek1 Week first randomization (1, randomized; NA ) randWeek2 Week second randomization (CTN-0030) endWeek end \"word\" many weeks randomization? depends study protocol, close 16 24 weeks subjects. Baseline character string symbols startWeek last week randWeek1. Symbols defined Phase_1. Phase_1 character string symbols randWeek1 endWeek (subjects CTN-0027 CTN-0051) last week randWeek2 (CTN-0030). symbols : \"+\" = subject reported use opioid two days week; \"-\" = subject report use opioid week; \"*\" = subject reported one day opioid use week; \"o\" subject supposed report TLFB ; \"_\" represent weeks wherein subject scheduled provide TLFB (example, 30 days randomization). Phase_2 character string symbols randWeek2 endWeek subjects CTN-0030 . Symbols defined Phase_1.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/derived_weeklyTLFBPattern.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Patient TLFB Opioid Weekly Pattern Data — derived_weeklyTLFBPattern","text":"data set contains \"word\" describing weekly non-study opioid use patterns reported subject TLFB. Based substances reported subjects, list substances classified opioid : non-study Buprenorphine, non-study Methadone, heroin, \"opioids\" (includes Oxymorphone, Opium, Fentanyl, Hydromorphone, Codeine, Suboxone, Tramadol, Morphine, Hydrocodone, Oxycodone). TLFB reporting indicating presence two use days substances marked \"+\" week. TLFB results positive substances 0 days marked \"-\". TLFB results positive substances 1 day week marked \"*\" week. data set derived data set; script used create \"scripts/create_weeklyTLFBPattern_20220511.R\". NOTE: studies collected TLFB data others. Also, times marked starting week randomization. represent weeks randomization \"_\" TLFB data collected. subjects never randomized, subsequent protocol weeks marked missing (\"o\").","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/loadRawData.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Data Sets into a List — loadRawData","title":"Load Data Sets into a List — loadRawData","text":"Load Data Sets List","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/loadRawData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Data Sets into a List — loadRawData","text":"","code":"loadRawData(dataNames_char)"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/loadRawData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Data Sets into a List — loadRawData","text":"dataNames_char Names data sets load","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/loadRawData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Data Sets into a List — loadRawData","text":"Loads data sets specified current function environment evaluation (unused) returns data sets named list","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/loadRawData.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load Data Sets into a List — loadRawData","text":"may want perform SQL-like operations set tables without loading table R's Global Environment separately. function loads data sets self-destructing environment returns named list data sets.","code":""},{"path":"https://ctn-0094.github.io/public.ctn0094extra/reference/loadRawData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Data Sets into a List — loadRawData","text":"","code":"loadRawData(c(\"tlfb\", \"all_drugs\")) #> $tlfb #> # A tibble: 237,778 × 3 #>      who what     when #>    <int> <fct>   <dbl> #>  1     2 Opioid    -32 #>  2     2 Opioid    -31 #>  3     2 Alcohol   -30 #>  4     2 Opioid    -30 #>  5     2 Opioid    -29 #>  6     2 THC       -29 #>  7     2 Opioid    -28 #>  8     2 THC       -28 #>  9     2 Alcohol   -27 #> 10     2 Opioid    -27 #> # ℹ 237,768 more rows #>  #> $all_drugs #> # A tibble: 307,523 × 4 #>      who what      source  when #>    <int> <fct>     <fct>  <dbl> #>  1     2 Morphine  TFB      -32 #>  2     2 Oxycodone TFB      -32 #>  3     2 Morphine  TFB      -31 #>  4     2 Oxycodone TFB      -31 #>  5     2 Alcohol   TFB      -30 #>  6     2 Morphine  TFB      -30 #>  7     2 Oxycodone TFB      -30 #>  8     2 Fentanyl  TFB      -29 #>  9     2 Oxycodone TFB      -29 #> 10     2 Thc       TFB      -29 #> # ℹ 307,513 more rows #>"},{"path":"https://ctn-0094.github.io/public.ctn0094extra/news/index.html","id":"publicctn0094extra-103","dir":"Changelog","previous_headings":"","what":"public.ctn0094extra 1.0.3","title":"public.ctn0094extra 1.0.3","text":"Initial CRAN submission.","code":""}]
